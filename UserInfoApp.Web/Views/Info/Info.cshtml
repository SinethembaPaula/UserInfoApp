@model UserInfoApp.Web.ViewModels.InfoViewModel
@{
    ViewData["Title"] = "User Info";
}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
<div class="container mt-4">
    <h2>Hello, @Model.Name @Model.Surname</h2>
    <form id="infoForm">
        <input type="hidden" asp-for="PersonId" />
        <div class="mb-2">
            <label>Tell No:</label>
            <input asp-for="TellNo" class="form-control" />
        </div>
        <div class="mb-2">
            <label>Cell No:</label>
            <input asp-for="CellNo" class="form-control" />
        </div>
        <!-- Repeat for all editable fields -->
        <div class="mb-2">
            <label>Address Line 1:</label>
            <input asp-for="AddressLine1" class="form-control" />
        </div>
        <!-- ... etc ... -->
        <button type="button" class="btn btn-success" onclick="saveInfo()">Save</button>
    </form>

    <h4>Change Password</h4>
    <input type="password" id="newPassword" class="form-control mb-2" placeholder="New Password" />
    <button type="button" class="btn btn-warning" onclick="changePassword()">Update Password</button>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    function saveInfo() {
        $.ajax({
            url: '/Info/UpdateInfo',
            method: 'POST',
            data: $('#infoForm').serialize(),
            success: function (resp) {
                if (resp.success) alert('Info updated!');
            }
        });
    }
    function changePassword() {
        $.ajax({
            url: '/Info/UpdatePassword',
            method: 'POST',
            data: {
                personId: $('[name="PersonId"]').val(),
                newPassword: $('#newPassword').val()
            },
            success: function (resp) {
                if (resp.success) alert('Password updated!');
            }
        });
    }
</script>
